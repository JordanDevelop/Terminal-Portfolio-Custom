!function(t){var e=5e3,n=function(t,e,n,o){this.x=t,this.y=e,this.size=n,this.color=o};n.prototype.mapXYToCanvasCoordinates=function(t,n){var o=Math.round(this.x/e*t),r=Math.round(this.y/e*n);return{x:o,y:r}};var o={getRandomStar:function(){var t=Math.floor(Math.random()*(e+1)),o=Math.floor(Math.random()*(e+1)),r=this._getWeightedRandomSize(),i=this._getWeightedRandomColor(),a=this._applyRandomShade(i);return new n(t,o,r,this._getRGBColorString(a))},_getWeightedRandomSize:function(){var t=[1,1.5,2],e=[.8,.15,.05];return this._getWeightedRandom(t,e)},_getWeightedRandomColor:function(){var t=[{r:255,g:189,b:111},{r:255,g:221,b:180},{r:255,g:244,b:232},{r:251,g:248,b:255},{r:202,g:216,b:255},{r:170,g:191,b:255},{r:155,g:176,b:255}],e=[.05,.05,.05,.7,.05,.05,.05];return this._getWeightedRandom(t,e)},_getRandomShade:function(){var t=[.4,.6,1],e=[.5,.3,.2];return this._getWeightedRandom(t,e)},_applyRandomShade:function(t){var e=this._getRandomShade();return 1!==e&&(t.r=Math.floor(t.r*e),t.g=Math.floor(t.g*e),t.b=Math.floor(t.b*e)),t},_getRGBColorString:function(t){return"rgb("+t.r+","+t.g+","+t.b+")"},_getWeightedRandom:function(t,e){for(var n=function(t,e){return Math.random()*(e-t)+t},o=e.reduce(function(t,e){return t+e}),r=n(0,o),i=0,a=0;a<t.length;a++)if(i+=e[a],i=+i.toFixed(2),r<=i)return t[a]}},r=[];t.fn.starfield=function(n){var i=t.extend({starDensity:1,mouseScale:1,seedMovement:!0},n);$this=t(this);var a=$this.width(),h=$this.height(),s=a*h,d=.002*i.starDensity,g=Math.floor(s*d);if(i.seedMovement)var u=5,f=5;else var u=0,f=0;for(var c=t('<canvas id="rocketwagon-canvas">').css({position:"absolute",left:0,top:0,width:"100%",height:"100%"}).attr({width:$this.width(),height:$this.height()}).prependTo($this),l=0;l<g;l++)r.push(o.getRandomStar());var m=function(){t.each(r,function(t,n){var o=n.x-u,r=n.y-f;o<0&&(o+=e),r<0&&(r+=e),o>e&&(o-=e),r>e&&(r-=e),n.x=o,n.y=r})},v=function(){var e=document.getElementById("rocketwagon-canvas"),n=e.width,o=e.height;if(e.setAttribute("width",n.toString()),e.setAttribute("height",o.toString()),e.getContext){var i=e.getContext("2d");i.clearRect(0,0,n,o),i.fillStyle="black",i.fillRect(0,0,n,o),t.each(r,function(t,e){var r=e.mapXYToCanvasCoordinates(n,o);i.fillStyle=e.color,i.fillRect(r.x,r.y,e.size,e.size)})}};return $this.mousemove(function(e){var n=t(this),o=n.offset(),r=a/2,s=h/2,d=e.pageX-o.left-r,g=e.pageY-o.top-s;u=Math.round(i.mouseScale*(d/40)),f=Math.round(i.mouseScale*(g/40))}),function t(){requestAnimationFrame(t),m(),v()}(),this}}(jQuery);